{"version":3,"file":"arnold-says.js","sources":["../index.mjs"],"sourcesContent":["const isSupported = ['speechSynthesis', 'SpeechSynthesisUtterance'].every((key) => key in window);\nconst synth = isSupported ? speechSynthesis : {};\nconst notSupportedMsg = 'speechSynthesis not supported';\n\nconst voicePromise = new Promise((resolve, reject) => {\n    if (isSupported) {\n        synth.addEventListener('voiceschanged', () => {\n            resolve(synth.getVoices());\n        });\n    }\n});\n\nfunction says(text) {\n    return new Promise((resolve, reject) => {\n        if (!isSupported) {\n            return reject(Error(notSupportedMsg));\n        }\n\n        voicePromise.then((voices) => {\n            const utterance = new SpeechSynthesisUtterance(text);\n            const Anna = voices.find(findAnna);\n            if (!Anna) reject(Error('Could not find Annas voice'));\n\n            utterance.voice = Anna;\n            utterance.pitch = 0;\n            utterance.rate = 0.6;\n\n            utterance.addEventListener('end', (event) => resolve(event));\n            utterance.addEventListener('error', (event) => {\n              if (event.error) {\n                reject(event.error);\n              }\n            });\n\n            synth.speak(utterance);\n        });\n    });\n}\n\nfunction findAnna(voice) {\n    return voice.name === \"Anna\";\n}\n\nexport default {\n    says\n};\n"],"names":["findAnna","voice","name","isSupported","every","key","window","synth","speechSynthesis","notSupportedMsg","voicePromise","Promise","resolve","reject","addEventListener","getVoices","text","Error","then","voices","utterance","SpeechSynthesisUtterance","Anna","find","pitch","rate","event","error","speak"],"mappings":"kLAuCA,SAASA,EAASC,SACQ,SAAfA,EAAMC,KAxCjB,IAAMC,GAAe,kBAAmB,4BAA4BC,MAAM,SAACC,UAAQA,KAAOC,SACpFC,EAAQJ,EAAcK,mBACtBC,EAAkB,gCAElBC,EAAe,IAAIC,QAAQ,SAACC,EAASC,GACnCV,KACMW,iBAAiB,gBAAiB,aAC5BP,EAAMQ,6BAK1B,SAAcC,UACH,IAAIL,QAAQ,SAACC,EAASC,OACpBV,SACMU,EAAOI,MAAMR,MAGXS,KAAK,SAACC,OACTC,EAAY,IAAIC,yBAAyBL,GACzCM,EAAOH,EAAOI,KAAKvB,GACpBsB,GAAMT,EAAOI,MAAM,iCAEdhB,MAAQqB,IACRE,MAAQ,IACRC,KAAO,KAEPX,iBAAiB,MAAO,SAACY,UAAUd,EAAQc,OAC3CZ,iBAAiB,QAAS,SAACY,GAC/BA,EAAMC,SACDD,EAAMC,WAIXC,MAAMR"}